#:import Window kivy.core.window.Window


<MainMenu>:
    name: 'mainmenu'
    id: mainmenuscreen
    md_bg_color: app.bg_color

    BoxLayout:
        id: box
        orientation: 'vertical'
        padding: 80

        AnchorLayout:
            id: anchor_label
            size_hint: (1, 0.3)
            anchor_x: 'center'
            anchor_y: 'center'

            MDLabel:
                text: 'Student Portal'
                font_name: app.app_font
                theme_text_color: 'Custom'
                text_color: app.title_text_color
                halign: 'center'
                valign: 'center'
                font_size: str((Window.height/720)*60) + 'sp'

        AnchorLayout:
            id: anchor_buttons
            size_hint: (1, 1)
            anchor_x: 'center'
            anchor_y: 'center'

            MDGridLayout:
                id: grid
                cols: 4
                adaptive_size: True
                spacing: (10*(Window.width/Window.height)**3, 40)

                CustomIconButton:
                    display_icon: 'wikipedia'
                    icon_text: '[b]Wikipedia[/b]'
                    tooltip_text: 'Search anything\non wikipedia!'
                    on_release:
                        app.switch_screen('wikipedia', 'right')
                        self.canvas_opacity = 0
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass

                CustomIconButton:
                    display_icon: 'calendar-check-outline'
                    icon_text: '[b]To-do[/b]'
                    tooltip_text: 'A to-do list\nGet those tasks done!'
                    on_release:
                        app.switch_screen('todo', 'down')
                        self.canvas_opacity = 0
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass

                CustomIconButton:
                    display_icon: 'notebook'
                    icon_text: '[b]Notebook[/b]'
                    tooltip_text: 'Easy to\naccess notes'
                    on_release:
                        app.switch_screen('notebook', 'down')
                        self.canvas_opacity = 0
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass

                CustomIconButton:
                    display_icon: 'google-translate'
                    icon_text: '[b]Translation[/b]'
                    tooltip_text: 'Translate\nalmost\nany\nlanguage!'
                    on_release:
                        app.switch_screen('translation', 'left')
                        self.canvas_opacity = 0
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass

                CustomIconButton:
                    display_icon: 'bookshelf'
                    icon_text: '[b]Books[/b]'
                    tooltip_text: 'Search for\nbooks'
                    on_release:
                        app.switch_screen('books', 'right')
                        self.canvas_opacity = 0
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass

                CustomIconButton:
                    display_icon: 'youtube'
                    icon_text: '[b]YouTube[/b]'
                    tooltip_text: 'Search for\nyoutube videos'
                    on_release:
                        app.switch_screen('youtube', 'up')
                        self.canvas_opacity = 0
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass

                CustomIconButton:
                    display_icon: 'information'
                    icon_text: '[b]About[/b]'
                    tooltip_text: 'About\nthis app'
                    on_release:
                        app.switch_screen('about', 'up')
                        self.canvas_opacity = 0
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass

                CustomIconButton:
                    id: settings_button
                    display_icon: 'cog'
                    icon_text: '[b]Settings[/b]'
                    tooltip_text: 'Customize\nthe app!'
                    on_release:
                        app.switch_screen('settings', 'left')
                        self.canvas_opacity = 0
                        app.settings.display_settings()
                        Window.remove_widget(self.tooltip)
                        try: self.schedule.cancel()
                        except BaseException: pass


<CustomIconButton>:
    id: menubutton
    display_icon: ''
    icon_text: ''
    height: Window.height/4.5
    width: self.height*1.4
    canvas:
        Color:
            rgba: app.tile_color
        Rectangle:
            pos: (self.x, self.y)
            size: (self.width, self.height)
    
    BoxLayout:
        size_hint: (1, 1)
        orientation: 'vertical'

        MDIcon:
            icon: root.display_icon
            theme_text_color: 'Custom'
            text_color: app.text_color
            font_size: str((Window.height/720)*90) + 'sp'
            halign: 'center'

        MDLabel:
            text: root.icon_text
            theme_text_color: 'Custom'
            text_color: app.text_color
            font_size: str((Window.height/720)*25) + 'sp'
            halign: 'center'
            font_name: app.app_font
            bold: True
            size_hint_y: 0.2
            markup: True

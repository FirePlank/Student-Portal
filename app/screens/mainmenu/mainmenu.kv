#:import utils kivy.utils
#:import os os
#:import Window kivy.core.window.Window

<MainMenu>:
    name: 'mainmenu'
    id: mainmenuscreen
    md_bg_color: app.bg_color
    MDBoxLayout:
        id: box
        size_hint: (1, 1)
        orientation: 'vertical'
        padding: 80
        AnchorLayout:
            id: anchor_label
            size_hint: (1, 0.3)
            anchor_x: 'center'
            anchor_y: 'center'
            MDLabel:
                text: 'Student Portal'
                font_name: app.app_font
                theme_text_color: 'Custom'
                text_color: app.title_text_color
                halign: 'center'
                valign: 'center'
                font_size: str((box.height/720)*50) + 'sp'
        AnchorLayout:
            id: anchor_buttons
            size_hint: (1, 1)
            anchor_x: 'center'
            anchor_y: 'center'
            MDGridLayout:
                id: grid
                cols: 4
                adaptive_size: True
                spacing: (10*(box.width/box.height)**3, 40)
                CustomIconButton:
                    display_icon: 'wikipedia.png'
                    icon_text: '[b]Wikipedia[/b]'
                    on_release:
                        app.switch_screen('wikipedia', 'left')
                        self.canvas_opacity = 0
                CustomIconButton:
                    display_icon: 'youtube.png'
                    icon_text: '[b]Youtube[/b]'
                    on_release:
                        app.switch_screen('youtube', 'right')
                        self.canvas_opacity = 0
                CustomIconButton:
                    display_icon: 'translation.png'
                    icon_text: '[b]Translation[/b]'
                    on_release:
                        app.switch_screen('translation', 'left')
                        self.canvas_opacity = 0
                CustomIconButton:
                    display_icon: 'todo.png'
                    icon_text: '[b]To-do[/b]'
                    on_release:
                        app.switch_screen('todo', 'right')
                        self.canvas_opacity = 0
                CustomIconButton:
                    display_icon: 'notebook.png'
                    icon_text: '[b]Notebook[/b]'
                    on_release:
                        app.switch_screen('notebook', 'right')
                        self.canvas_opacity = 0
                CustomIconButton:
                    display_icon: 'books.png'
                    icon_text: '[b]Books[/b]'
                CustomIconButton:
                    display_icon: 'about.png'
                    icon_text: '[b]About[/b]'
                CustomIconButton:
                    display_icon: 'settings.png'
                    icon_text: '[b]Settings[/b]'

<CustomIconButton>:
    id: menubutton
    canvas:
        Color:
            rgba: app.tile_color
        Rectangle:
            pos: (self.x, self.y)
            size: (self.width, self.height)
    height: self.parent.parent.height/3
    width: self.height*1.4
    display_icon: 'settings.png'
    icon_text: ''
    BoxLayout:
        size_hint: (1, 1)
        orientation: 'vertical'
        Image:
            source: os.path.join(app.mainmenu_icons, root.display_icon)
            size_hint_y: 0.7
            width: self.height
            pos_hint: {'x': 0, 'y': 0.16}
        MDLabel:
            text: root.icon_text
            theme_text_color: 'Custom'
            text_color: app.text_color
            font_size: str((Window.height/720)*16) + 'sp'
            halign: 'center'
            font_name: app.app_font
            bold: True
            size_hint_y: 0.2
            markup: True

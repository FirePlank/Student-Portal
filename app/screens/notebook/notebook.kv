#:import utils kivy.utils
#:import Window kivy.core.window.Window

<Notebook>:
    name: 'notebook'
    id: notebookscreen
    md_bg_color: app.bg_color
    FloatLayout:
        id: box_root
        size_hint: (1, 1)
        MDLabel:
            text: 'Notebook'
            font_name: app.app_font
            theme_text_color: 'Custom'
            text_color: app.title_text_color
            halign: 'center'
            valign: 'middle'
            font_size: str((Window.height/720)*60) + 'sp'
            pos_hint: {'y': 0.4}
        ScrollView:
            id: scroller
            canvas.before:
                Color:
                    rgba: app.bg_color
                Rectangle:
                    pos: (self.x, self.y)
                    size: (self.width, self.height)
            smooth_scroll_end: 10
            bar_width: 10
            scroll_type: ['bars', 'content']
            bar_inactive_color: self.bar_color
            effect_cls : 'ScrollEffect'
            scroll_distance: dp((Window.height/720)*20)
            scroll_wheel_distance: dp((Window.height/720)*30)
            size_hint: (0.8, 0.75)
            pos_hint: {'x': 0.1, 'y': 0.05}
            StackLayout:
                id: scroll_box
                size_hint: (1, None)
                height: self.minimum_height
                padding: dp(20)
                spacing: dp(20)
        HoverIconButton:
            icon: 'arrow-left-bold'
            theme_text_color: 'Custom'
            text_color: app.title_text_color
            user_font_size: str((Window.height/720)*80) + 'sp'
            pos_hint: {'x': 0.09, 'y': 0.83}
            on_release:
                app.switch_screen('mainmenu', 'left')
                root.cleanup()
                scroller.scroll_y = 1
        HoverIconButton:
            icon: 'plus-box-multiple'
            theme_text_color: "Custom"
            text_color: app.title_text_color
            user_font_size: str((Window.height/720)*80) + 'sp'
            pos_hint: {'x': 0.8, 'y': 0.83}
            on_release:
                root.add_note()

<Note>:
    canvas.before:
        Color:
            rgba: app.tile_color
        Rectangle:
            pos: (self.x, self.y)
            size: (self.width, self.height)
    size_hint: (1, None)
    height: Window.height/3
    TextInput:
        id: title
        font_name: app.app_font
        multiline: False
        size_hint: (0.35, 0.12)
        font_size: str((Window.height/720)*20) + 'sp'
        pos_hint: {'x': 0.02, 'y': 0.76}
        foreground_color: app.text_color
        background_color: app.tile_color
        padding: [6, self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 6, 0]
        readonly: True
        cursor_color: app.accent_color
        cursor_blink: False
        background_normal: 'atlas://data/images/defaulttheme/textinput_active'
    MDLabel:
        id: date
        font_name: app.app_font
        size_hint: (0.2, 0.12)
        theme_text_color: 'Custom'
        text_color: app.text_color
        valign: 'middle'
        font_size: str((Window.height/720)*20) + 'sp'
        pos_hint: {'x': 0.4, 'y': 0.76}
    NoteButton:
        id: edit_button
        text: "EDIT"
        pos_hint: {'x': 0.555, 'y': 0.76}
        on_release:
            root.parent.parent.parent.parent.edit_note(root)
    NoteButton:
        id: delete_button
        text: "DELETE"
        pos_hint: {'x': 0.685, 'y': 0.76}
        disabled: False
        on_release:
            root.parent.parent.parent.parent.delete_note(root)
    NoteButton:
        id: updatedate_button
        text: "UPDATE DATE"
        pos_hint: {'x': 0.82, 'y': 0.76}
        disabled: False
        on_release:
            root.parent.parent.parent.parent.update_date(root)
    ScrollView:
        bar_width: 10
        scroll_type: ['bars', 'content']
        bar_inactive_color: self.bar_color
        size_hint: (0.96, 0.65) 
        pos_hint: {'x': 0.02, 'y': 0.05}
        effect_cls : 'ScrollEffect'
        TextInput:
            id: body
            font_name: app.app_font
            font_size: str((Window.height/720)*15) + 'sp'
            foreground_color: app.text_color
            background_color: app.tile_color
            readonly: True
            cursor_color: app.accent_color
            cursor_blink: False
            background_normal: 'atlas://data/images/defaulttheme/textinput_active'
            size_hint: 1, None
            height: max(self.minimum_height, self.parent.height)

<NoteButton@MDRectangleFlatButton>:
    font_name: app.app_font
    text_color: app.text_color
    font_size: str((Window.height/720)*20) + 'sp'
    size_hint: (None, 0.12)
